<!DOCTYPE html>
<html lang="ru">
<head>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ: ü™¨ | TITAN AI v6.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* TITAN OS v6.0 CORE STYLES 
           DESIGNED BY ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ
        */
        :root {
            --n: #ff6b00; /* Neon Orange */
            --n-glow: rgba(255, 107, 0, 0.4);
            --n-dark: #cc5500;
            --bg: #000000;
            --c-sub: #050505;
            --c-card: #0a0a0a;
            --b-light: rgba(255, 255, 255, 0.05);
            --b-neon: rgba(255, 107, 0, 0.2);
            --text-main: #ffffff;
            --text-dim: #666666;
            --gold: #ffcc00;
            --error: #ff3333;
            --success: #00ff66;
            --transition: 0.6s cubic-bezier(0.19, 1, 0.22, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            scrollbar-width: thin;
            scrollbar-color: var(--n) var(--bg);
        }

        /* Custom Scrollbar */
        *::-webkit-scrollbar { width: 6px; }
        *::-webkit-scrollbar-track { background: var(--bg); }
        *::-webkit-scrollbar-thumb { background: var(--n); border-radius: 10px; }

        html, body {
            width: 100%;
            height: 100%;
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            overflow-y: overlay;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω (–ú–∞—Å—Ç–µ—Ä-–ê–≤–∞—Ç–∞—Ä) */
        .ai-master-bg {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to left, rgba(0,0,0,0.8) 20%, transparent 100%),
                        url('https://i.ibb.co/Lzy6Yn2/your-avatar.jpg') no-repeat center center;
            background-size: cover;
            opacity: 0.18;
            filter: grayscale(1) contrast(1.4) brightness(0.7);
            z-index: -2;
            pointer-events: none;
            animation: backgroundFloat 20s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0% { transform: scale(1.0); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1.0); }
        }

        /* –ù–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ –Ω–∞ —Ñ–æ–Ω–µ */
        .neural-mesh {
            position: fixed;
            inset: 0;
            background-image: radial-gradient(var(--b-neon) 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0.2;
            z-index: -1;
            mask-image: linear-gradient(to bottom, black, transparent);
        }

        header {
            width: 100%;
            padding: 100px 5% 40px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            max-width: 1600px;
            margin: 0 auto;
            position: relative;
        }

        .brand-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .titan-logo {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2rem, 10vw, 5.5rem);
            font-weight: 900;
            letter-spacing: 20px;
            text-transform: uppercase;
            color: #fff;
            filter: drop-shadow(0 0 20px var(--n-glow));
            line-height: 0.9;
        }

        .titan-tagline {
            font-size: 0.8rem;
            letter-spacing: 8px;
            color: var(--n);
            text-transform: uppercase;
            font-weight: 800;
            margin-left: 5px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .titan-tagline::before {
            content: '';
            width: 30px;
            height: 2px;
            background: var(--n);
        }

        /* –í–∏–¥–∂–µ—Ç –ì–ª–æ–±–∞–ª—å–Ω–æ–π –°–∏–ª—ã */
        .power-stats-box {
            text-align: right;
            padding-right: 20px;
            border-right: 5px solid var(--n);
            margin-bottom: 10px;
        }

        .power-label {
            font-family: 'Orbitron';
            font-size: 0.65rem;
            letter-spacing: 4px;
            color: var(--text-dim);
            text-transform: uppercase;
        }

        .power-value {
            font-family: 'Orbitron';
            font-size: 4rem;
            font-weight: 900;
            line-height: 1;
            background: linear-gradient(180deg, #fff, #888);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .rank-title {
            color: var(--gold);
            font-size: 0.9rem;
            font-weight: 900;
            letter-spacing: 2px;
            margin-top: 5px;
            text-transform: uppercase;
        }

        .main-container {
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 5%;
        }

        .section-header {
            margin-bottom: 50px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .section-header h2 {
            font-family: 'Orbitron';
            font-size: 1.2rem;
            letter-spacing: 5px;
            text-transform: uppercase;
            color: #fff;
        }

        .section-line {
            flex-grow: 1;
            height: 1px;
            background: linear-gradient(to right, var(--b-neon), transparent);
        }

        /* –°–µ—Ç–∫–∞ –≤–ø—Ä–∞–∂–Ω–µ–Ω–∏–π */
        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
        }

        .exercise-card {
            background: var(--c-card);
            border: 1px solid var(--b-light);
            border-radius: 40px;
            padding: 50px 35px;
            position: relative;
            cursor: pointer;
            transition: var(--transition);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            min-height: 240px;
        }

        .exercise-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, var(--n) 0%, transparent 100%);
            opacity: 0;
            transition: 0.5s;
        }

        .exercise-card:hover {
            transform: translateY(-15px) scale(1.02);
            border-color: var(--n);
            box-shadow: 0 40px 80px rgba(0,0,0,0.9);
        }

        .exercise-card:hover::before { opacity: 0.05; }

        .ex-meta {
            position: absolute;
            top: 35px;
            left: 35px;
            font-size: 0.6rem;
            letter-spacing: 3px;
            color: var(--n);
            font-weight: 900;
            text-transform: uppercase;
        }

        .ex-name {
            font-family: 'Orbitron';
            font-size: 1.4rem;
            font-weight: 800;
            letter-spacing: 2px;
            z-index: 1;
            text-transform: uppercase;
        }

        .ex-desc {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-top: 15px;
            z-index: 1;
            line-height: 1.6;
        }

        /* Overlay System */
        .titan-overlay {
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 9999;
            display: none;
            flex-direction: column;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .overlay-nav {
            width: 100%;
            padding: 30px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(30px);
            border-bottom: 1px solid var(--b-neon);
            z-index: 100;
        }

        .nav-title-unit {
            display: flex;
            flex-direction: column;
        }

        .nav-main-title {
            font-family: 'Orbitron';
            font-size: 1rem;
            letter-spacing: 4px;
            text-transform: uppercase;
            color: var(--n);
        }

        .close-trigger {
            background: none;
            border: none;
            color: #fff;
            font-size: 3rem;
            font-weight: 100;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-trigger:hover {
            color: var(--n);
            transform: rotate(90deg);
        }

        /* AI Input Form */
        .ai-input-zone {
            width: 100%;
            max-width: 900px;
            margin: 100px auto;
            padding: 0 5%;
        }

        .input-label {
            font-size: 0.75rem;
            letter-spacing: 5px;
            color: var(--text-dim);
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 30px;
            display: block;
        }

        .huge-input {
            width: 100%;
            background: #080808;
            border: 2px solid #111;
            border-radius: 40px;
            padding: 50px;
            color: #fff;
            font-family: 'Orbitron';
            font-size: 5rem;
            text-align: center;
            transition: 0.5s;
            margin-bottom: 50px;
        }

        .huge-input:focus {
            border-color: var(--n);
            box-shadow: 0 0 100px rgba(255, 107, 0, 0.15);
            background: #0d0600;
        }

        .generate-btn {
            width: 100%;
            background: var(--n);
            border: none;
            padding: 40px;
            border-radius: 40px;
            font-family: 'Orbitron';
            font-weight: 900;
            font-size: 1.5rem;
            letter-spacing: 12px;
            color: #000;
            cursor: pointer;
            transition: 0.4s;
            box-shadow: 0 30px 60px rgba(255, 107, 0, 0.2);
            text-transform: uppercase;
        }

        .generate-btn:hover {
            transform: translateY(-5px);
            filter: brightness(1.2);
            box-shadow: 0 40px 100px rgba(255, 107, 0, 0.4);
        }

        /* 30-Day Program Nodes */
        .program-container {
            width: 100%;
            max-width: 1000px;
            margin: 80px auto;
            padding-bottom: 150px;
        }

        .day-node {
            background: var(--c-card);
            border: 1px solid var(--b-light);
            border-radius: 50px;
            padding: 60px;
            margin-bottom: 50px;
            border-left: 20px solid var(--n);
            position: relative;
            transition: 0.4s;
        }

        .day-node:hover {
            border-left-width: 35px;
        }

        .day-node.rest-day {
            border-left-color: #222;
            opacity: 0.6;
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 50px;
        }

        .day-number {
            font-family: 'Orbitron';
            font-size: 3.5rem;
            font-weight: 900;
            line-height: 1;
        }

        .day-method {
            color: var(--gold);
            font-size: 0.75rem;
            letter-spacing: 6px;
            text-transform: uppercase;
            font-weight: 800;
            margin-top: 10px;
            display: block;
        }

        .exercise-block {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 35px;
            padding: 40px;
            margin-bottom: 25px;
        }

        .block-label {
            color: var(--n);
            font-size: 0.7rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 15px;
            display: block;
        }

        .block-value {
            font-size: 2.2rem;
            font-weight: 900;
            margin-bottom: 15px;
            display: block;
        }

        .block-desc {
            color: var(--text-dim);
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .block-tempo {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.05);
            color: var(--gold);
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .rest-timer-box {
            text-align: center;
            padding: 30px;
            color: #444;
            font-family: 'Orbitron';
            font-size: 0.8rem;
            letter-spacing: 15px;
            text-transform: uppercase;
            font-weight: 900;
        }

        .coach-footer {
            margin-top: 50px;
            padding-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.05);
            color: #555;
            font-style: italic;
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Mobile Fixes */
        @media (max-width: 1024px) {
            .huge-input { font-size: 3rem; padding: 30px; }
            .day-node { padding: 40px; border-radius: 35px; }
            .day-number { font-size: 2.5rem; }
        }
    </style>
</head>
<body>
    <div class="ai-master-bg"></div>
    <div class="neural-mesh"></div>
    <header>
        <div class="brand-container">
            <h1 class="titan-logo">ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ: ü™¨</h1>
            <div class="titan-tagline">
                <span>NEURAL CALISTHENICS ENGINE</span>
                <span style="color:rgba(255,255,255,0.2)">|</span>
                <span id="os-version">V 6.0.4.2</span>
            </div>
        </div>

        <div class="power-stats-box">
            <div class="power-label">GLOBAL STRENGTH INDEX</div>
            <div id="p-val" class="power-value">0</div>
            <div id="p-title" class="rank-title">–ù–û–í–ò–ß–û–ö</div>
            <div style="width: 100%; height: 2px; background: #111; margin-top: 10px; position: relative;">
                <div id="rank-bar" style="position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: var(--n); transition: 1s;"></div>
            </div>
        </div>
    </header>

    <main class="main-container">
        <section class="section-header">
            <h2>–í–´–ë–ï–†–ò –¶–ï–õ–¨ –¢–†–ï–ù–ò–†–û–í–ö–ò</h2>
            <div class="section-line"></div>
        </section>

        <div class="exercise-grid" id="grid">
            </div>
    </main>

    <div class="titan-overlay" id="pnl">
        <div class="overlay-nav">
            <div class="nav-title-unit">
                <span id="curExType" style="color: var(--n); font-size: 0.6rem; letter-spacing: 3px;">–ê–ù–ê–õ–ò–ó –¢–ò–ü–ê...</span>
                <h2 id="curEx" class="nav-main-title">SYSTEM CORE</h2>
            </div>
            <button class="close-trigger" onclick="toggleP(false)">‚úï</button>
        </div>

        <div class="ai-input-zone">
            <span class="input-label">–í–í–ï–î–ò–¢–ï –í–ê–® –¢–ï–ö–£–©–ò–ô –ú–ê–ö–°–ò–ú–£–ú (–î–õ–Ø 0 –ó–ê–ü–£–°–ö–ê–ï–¢–°–Ø REGR-MODE)</span>
            <input type="number" id="inp" class="huge-input" placeholder="0" min="0" max="999">
            <button class="generate-btn" onclick="generate()">–ò–ù–ò–¶–ò–ò–†–û–í–ê–¢–¨ –ì–ï–ù–ï–†–ê–¶–ò–Æ –ü–õ–ê–ù–ê</button>
            
            <div id="res" class="program-container">
                </div>
        </div>
    </div>
    <script>
    // 1. –ü—Ä—è–º–∏–π —ñ–º–ø–æ—Ä—Ç –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó (v12.x)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getDatabase, ref, get, update } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    // 2. –¢–≤—ñ–π –∫–æ–Ω—Ñ—ñ–≥ (—É–∂–µ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π)
    const firebaseConfig = {
        apiKey: "AIzaSyDcsXkmVb9lw5C4ZCLf1PMoLqb5ZO2nA3Y",
        authDomain: "vip-shop-a2ec4.firebaseapp.com",
        databaseURL: "https://vip-shop-a2ec4-default-rtdb.firebaseio.com",
        projectId: "vip-shop-a2ec4",
        storageBucket: "vip-shop-a2ec4.firebasestorage.app",
        messagingSenderId: "429877342673",
        appId: "1:429877342673:web:0d2b5443f46bc03ec670f0"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // 3. –õ–æ–≥—ñ–∫–∞ –∫–Ω–æ–ø–∫–∏ üë§
    (function() {
        const authorBox = document.createElement('div');
        authorBox.style.cssText = `
            position: fixed; bottom: 20px; right: 20px; z-index: 10001;
            width: 55px; height: 55px; background: #ff6b00; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 0 15px rgba(255, 107, 0, 0.5);
            border: 2px solid rgba(255,255,255,0.2);
        `;
        authorBox.innerHTML = `<span style="font-size: 22px;">üë§</span>`;
        document.body.appendChild(authorBox);

        authorBox.onclick = async () => {
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ª—ñ–º—ñ—Ç (1 —Ä–∞–∑ –Ω–∞ –∂–∏—Ç—Ç—è –ø—Ä–∏—Å—Ç—Ä–æ—é)
            if (localStorage.getItem('promo_used')) {
                showNotification("–õ–ò–ú–ò–¢ –ò–°–ß–ï–†–ü–ê–ù: 1 –í–í–û–î –ù–ê –í–°–ï–ì–î–ê");
                return;
            }

            const promo = prompt("–í–í–ï–î–ò–¢–ï –ö–û–î –ê–í–¢–û–†–ê:");
            if (!promo) return;
            const cleanPromo = promo.toUpperCase().trim();

            try {
                const dbRef = ref(db, 'affiliates/' + cleanPromo);
                const snap = await get(dbRef);
                
                if (snap.exists()) {
                    // –ö–æ–¥ —î -> +1
                    const currentCount = snap.val().count || 0;
                    await update(dbRef, { count: currentCount + 1 });
                    
                    // –ë–ª–æ–∫—É—î–º–æ –Ω–∞–∑–∞–≤–∂–¥–∏
                    localStorage.setItem('promo_used', 'true');
                    showNotification("–ö–û–î –£–°–ü–ï–®–ù–û –ê–ö–¢–ò–í–ò–†–û–í–ê–ù!");
<script type="module">
    // 1. –ü—Ä—è–º–∏–π —ñ–º–ø–æ—Ä—Ç –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó (v12.x)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getDatabase, ref, get, update } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    // 2. –¢–≤—ñ–π –∫–æ–Ω—Ñ—ñ–≥ (—É–∂–µ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π)
    const firebaseConfig = {
        apiKey: "AIzaSyDcsXkmVb9lw5C4ZCLf1PMoLqb5ZO2nA3Y",
        authDomain: "vip-shop-a2ec4.firebaseapp.com",
        databaseURL: "https://vip-shop-a2ec4-default-rtdb.firebaseio.com",
        projectId: "vip-shop-a2ec4",
        storageBucket: "vip-shop-a2ec4.firebasestorage.app",
        messagingSenderId: "429877342673",
        appId: "1:429877342673:web:0d2b5443f46bc03ec670f0"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // 3. –õ–æ–≥—ñ–∫–∞ –∫–Ω–æ–ø–∫–∏ üë§
    (function() {
        const authorBox = document.createElement('div');
        authorBox.style.cssText = `
            position: fixed; bottom: 20px; right: 20px; z-index: 10001;
            width: 55px; height: 55px; background: #ff6b00; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 0 15px rgba(255, 107, 0, 0.5);
            border: 2px solid rgba(255,255,255,0.2);
        `;
        authorBox.innerHTML = `<span style="font-size: 22px;">üë§</span>`;
        document.body.appendChild(authorBox);

        authorBox.onclick = async () => {
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ª—ñ–º—ñ—Ç (1 —Ä–∞–∑ –Ω–∞ –∂–∏—Ç—Ç—è –ø—Ä–∏—Å—Ç—Ä–æ—é)
            if (localStorage.getItem('promo_used')) {
                showNotification("–õ–ò–ú–ò–¢ –ò–°–ß–ï–†–ü–ê–ù: 1 –í–í–û–î –ù–ê –í–°–ï–ì–î–ê");
                return;
            }

            const promo = prompt("–í–í–ï–î–ò–¢–ï –ö–û–î –ê–í–¢–û–†–ê:");
            if (!promo) return;
            const cleanPromo = promo.toUpperCase().trim();

            try {
                const dbRef = ref(db, 'affiliates/' + cleanPromo);
                const snap = await get(dbRef);
                
                if (snap.exists()) {
                    // –ö–æ–¥ —î -> +1
                    const currentCount = snap.val().count || 0;
                    await update(dbRef, { count: currentCount + 1 });
                    
                    // –ë–ª–æ–∫—É—î–º–æ –Ω–∞–∑–∞–≤–∂–¥–∏
                    localStorage.setItem('promo_used', 'true');
                    showNotification("–ö–û–î –£–°–ü–ï–®–ù–û –ê–ö–¢–ò–í–ò–†–û–í–ê–ù!");
                } else {
                    // –ö–æ–¥—É –Ω–µ–º–∞—î
                    showNotification("–¢–ê–ö–û–ì–û –ö–û–î–ê –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢");
                }
            } catch (e) {
                showNotification("–û–®–ò–ë–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•");
            }
        };

        function showNotification(text) {
            const msg = document.createElement('div');
            msg.style.cssText = `
                position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
                background: #ff6b00; color: #000; padding: 15px 25px; border-radius: 10px;
                font-family: 'Orbitron', sans-serif; font-weight: 900; z-index: 20000;
                text-align: center; box-shadow: 0 0 20px rgba(255,107,0,0.5);
            `;
            msg.innerText = text;
            document.body.appendChild(msg);
            setTimeout(() => msg.remove(), 3000);
        }
    })();
</scrit>
// === –°–ò–°–¢–ï–ú–ê –ü–ê–†–¢–ù–ï–†–ö–ò (–í–°–¢–ê–í–õ–Ø–¢–ò –¢–£–¢) ===
(function() {
    const btn = document.createElement('div');
    btn.style.cssText = `position:fixed;bottom:20px;right:20px;z-index:10001;width:55px;height:55px;background:#ff6b00;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 0 15px rgba(255,107,0,0.5);border:2px solid rgba(255,255,255,0.2);transition:0.3s;user-select:none;animation:btnPulse 2s infinite;`;
    btn.innerHTML = `<span style="font-size:24px;">üë§</span>`;
    document.body.appendChild(btn);

    const style = document.createElement('style');
    style.innerHTML = `@keyframes btnPulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}`;
    document.head.appendChild(style);

    btn.onclick = async () => {
        if (localStorage.getItem('promo_done')) return showMsg("–õ–ò–ú–ò–¢: 1 –í–í–û–î", "#ff3333");

        let p = prompt("–í–í–ï–î–ò–¢–ï –ö–û–î –ê–í–¢–û–†–ê:");
        if (!p) return;
        p = p.trim().toUpperCase();

        try {
            const r = ref(db, `affiliates/${p}`);
            const s = await get(r);

            if (s.exists()) {
                await update(r, { count: (s.val().count || 0) + 1 });
                localStorage.setItem('promo_done', 'true');
                showMsg("–ê–ö–¢–ò–í–ò–†–û–í–ê–ù–û!", "#00ff00");
            } else {
                showMsg("–ö–û–î –ù–ï –ù–ê–ô–î–ï–ù", "#ff3333");
            }
        } catch (e) { showMsg("–û–®–ò–ë–ö–ê –ë–ê–ó–´", "#ff3333"); }
    };

    function showMsg(t, c) {
        const n = document.createElement('div');
        n.style.cssText = `position:fixed;top:20px;left:50%;transform:translateX(-50%);background:${c};color:#fff;padding:12px 20px;border-radius:8px;font-family:sans-serif;font-weight:bold;z-index:20000;box-shadow:0 5px 15px rgba(0,0,0,0.3);transition:0.5s;`;
        n.innerText = t;
        document.body.appendChild(n);
        setTimeout(() => { n.style.opacity = '0'; setTimeout(() => n.remove(), 500); }, 2500);
    }
})();


// === –î–ê–õ–Ü –ô–î–ï –¢–≤—ñ–π –û–°–ù–û–í–ù–ò–ô –ö–û–î (TitanDB, updateGlobalUI —ñ —Ç.–¥.) ===

        // TITAN DATABASE 6.0 ‚Äî 55 –£–ü–†–ê–ñ–ù–ï–ù–ò–ô –° –ú–ê–¢–†–ò–¶–ï–ô –¢–ò–ü–û–í
        const TitanDB = [
            // –ü–ª–µ—á–µ–≤–æ–π –ø–æ—è—Å / –¢—è–≥–∏ (PULL)
            {n: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è", t: "pull", d: "–ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç—è–≥–∞ –¥–ª—è —à–∏—Ä–æ—á–∞–π—à–∏—Ö."},
            {n: "–®–∏—Ä–æ–∫–∏–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è", t: "pull", d: "–ê–∫—Ü–µ–Ω—Ç –Ω–∞ –≤–Ω–µ—à–Ω—é—é —á–∞—Å—Ç—å —Å–ø–∏–Ω—ã."},
            {n: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è —É–∑–∫–∏–º —Ö–≤–∞—Ç–æ–º", t: "pull", d: "–ê–∫—Ü–µ–Ω—Ç –Ω–∞ –±–∏—Ü–µ–ø—Å –∏ —Å–µ—Ä–µ–¥–∏–Ω—É —Å–ø–∏–Ω—ã."},
            {n: "–ê–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è", t: "pull", d: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Ç—è–≥–∞ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤."},
            {n: "–õ—É—á–Ω–∏–∫ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è", t: "pull_iso", d: "–ò–∑–æ–ª–∏—Ä—É—é—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É."},
            {n: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –∑–∞ –≥–æ–ª–æ–≤—É", t: "pull_e", d: "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ç—è–≥–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–ª–µ—á."},
            {n: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –ö–æ–º–º–∞–Ω–¥–æ", t: "pull", d: "–£–∑–∫–∞—è —Ç—è–≥–∞ —Å —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–º –∫–æ—Ä–ø—É—Å–∞."},
            {n: "L-–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è", t: "pull_core", d: "–¢—è–≥–∞ —Å —É–¥–µ—Ä–∂–∞–Ω–∏–µ–º —É–≥–æ–ª–∫–∞ (–ø—Ä–µ—Å—Å + —Å–ø–∏–Ω–∞)."},
            {n: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –Ω–∞ –æ–¥–Ω–æ–π —Ä—É–∫–µ", t: "pull_god", d: "–í—ã—Å—à–∞—è —Ç—è–≥–æ–≤–∞—è —Å–∏–ª–∞."},

            // –ñ–∏–º–æ–≤—ã–µ (PUSH)
            {n: "–û—Ç–∂–∏–º–∞–Ω–∏—è –æ—Ç –ø–æ–ª–∞", t: "push", d: "–ë–∞–∑–æ–≤—ã–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –∂–∏–º."},
            {n: "–ë—Ä—É—Å—å—è", t: "push_v", d: "–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∂–∏–º –≤–Ω–∏–∑, —Ç—Ä–∏—Ü–µ–ø—Å –∏ –≥—Ä—É–¥—å."},
            {n: "–ì–ª—É–±–æ–∫–∏–µ –±—Ä—É—Å—å—è", t: "push_v", d: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–º–ø–ª–∏—Ç—É–¥–∞ —Ä–∞—Å—Ç—è–∂–µ–Ω–∏—è –≥—Ä—É–¥–Ω—ã—Ö."},
            {n: "–ê–ª–º–∞–∑–Ω—ã–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è", t: "push_iso", d: "–ê–∫—Ü–µ–Ω—Ç –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —á–∞—Å—Ç—å –≥—Ä—É–¥–∏ –∏ —Ç—Ä–∏—Ü–µ–ø—Å."},
            {n: "–õ—É—á–Ω–∏–∫ –æ—Ç–∂–∏–º–∞–Ω–∏—è", t: "push_iso", d: "–ü–µ—Ä–µ–Ω–æ—Å –≤–µ—Å–∞ –Ω–∞ –æ–¥–Ω—É —Ä–∞–±–æ—á—É—é —Ä—É–∫—É."},
            {n: "–ü—Å–µ–≤–¥–æ-–ø–ª–∞–Ω—à –æ—Ç–∂–∏–º–∞–Ω–∏—è", t: "push_s", d: "–ñ–∏–º —Å –Ω–∞–∫–ª–æ–Ω–æ–º –∫–æ—Ä–ø—É—Å–∞ –≤–ø–µ—Ä–µ–¥ (–±–∞–∑–∞ –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞)."},
            {n: "–û—Ç–∂–∏–º–∞–Ω–∏—è –≤ —Å—Ç–æ–π–∫–µ –Ω–∞ —Ä—É–∫–∞—Ö", t: "push_god", d: "–í—ã—Å—à–∞—è –∂–∏–º–æ–≤–∞—è —Å–∏–ª–∞ –ø–ª–µ—á."},
            {n: "–û—Ç–∂–∏–º–∞–Ω–∏—è –Ω–∞ –∑–∞–ø—è—Å—Ç—å—è—Ö", t: "push_spec", d: "–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–≤—è–∑–æ–∫ –ø—Ä–µ–¥–ø–ª–µ—á—å—è."},
            {n: "–í–∑—Ä—ã–≤–Ω—ã–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è", t: "push_pow", d: "–†–∞–∑–≤–∏—Ç–∏–µ –±—ã—Å—Ç—Ä–æ–π —Å–∏–ª—ã –≥—Ä—É–¥–Ω—ã—Ö."},

            // –°—Ç–∞—Ç–∏–∫–∞ (STATIC)
            {n: "–ì–æ—Ä–∏–∑–æ–Ω—Ç (Full Planche)", t: "stat_push", d: "–£–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ–ª–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ–ª—É –Ω–∞ —Ä—É–∫–∞—Ö."},
            {n: "–ü–µ—Ä–µ–¥–Ω–∏–π –≤–∏—Å (Front Lever)", t: "stat_pull", d: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –≤–∏—Å –ª–∏—Ü–æ–º –≤–≤–µ—Ä—Ö."},
            {n: "–ó–∞–¥–Ω–∏–π –≤–∏—Å (Back Lever)", t: "stat_pull", d: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –≤–∏—Å –ª–∏—Ü–æ–º –≤–Ω–∏–∑."},
            {n: "–£–≥–æ–ª–æ–∫ –Ω–∞ –±—Ä—É—Å—å—è—Ö (L-Sit)", t: "stat_core", d: "–ë–∞–∑–æ–≤–æ–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–µ—Å—Å–∞."},
            {n: "V-Sit", t: "stat_core", d: "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É–≥–æ–ª–æ–∫ —Å –≤—ã—Å–æ–∫–∏–º –ø–æ–¥—ä–µ–º–æ–º –Ω–æ–≥."},
            {n: "–°—Ç–æ–π–∫–∞ –Ω–∞ —Ä—É–∫–∞—Ö (–í–∏—Å)", t: "stat_bal", d: "–ë–∞–ª–∞–Ω—Å –∏ —Å—Ç–∞—Ç–∏–∫–∞ –ø–ª–µ—á–µ–≤–æ–≥–æ –ø–æ—è—Å–∞."},
            {n: "–§–ª–∞–≥ (Human Flag)", t: "stat_mix", d: "–ë–æ–∫–æ–≤–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ–ø–æ—Ä–µ."},
            {n: "–í–∏—Å –Ω–∞ –æ–¥–Ω–æ–π —Ä—É–∫–µ", t: "stat_grip", d: "–†–∞–∑–≤–∏—Ç–∏–µ —Å—Ç–∞–ª—å–Ω–æ–π —Ö–≤–∞—Ç–∫–∏."},
            {n: "–ó–∞–∫—Ä—ã—Ç—ã–π –≥–æ—Ä–∏–∑–æ–Ω—Ç", t: "stat_push", d: "–ù–∞—á–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞ –æ—Å–≤–æ–µ–Ω–∏—è –ø–ª–∞–Ω—à–∞."},

            // –ú–æ—â—å –∏ –í–∑—Ä—ã–≤ (POWER)
            {n: "–í—ã—Ö–æ–¥ —Å–∏–ª–æ–π", t: "pow_dyn", d: "–í–∑—Ä—ã–≤–Ω–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –∏–∑ –≤–∏—Å–∞ –≤ —É–ø–æ—Ä –Ω–∞–¥ —Ç—É—Ä–Ω–∏–∫–æ–º."},
            {n: "–ú–µ–¥–ª–µ–Ω–Ω—ã–π –≤—ã—Ö–æ–¥", t: "pow_force", d: "–°–∏–ª–æ–≤–æ–π –ø–æ–¥—ä–µ–º –Ω–∞–¥ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω–æ–π –±–µ–∑ –∏–Ω–µ—Ä—Ü–∏–∏."},
            {n: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –¥–æ –ø–æ—è—Å–∞", t: "pow_dyn", d: "–í–∑—Ä—ã–≤–Ω–∞—è —Ç—è–≥–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –≤—ã—Ö–æ–¥–∞–º."},
            {n: "–û—Ç–∂–∏–º–∞–Ω–∏—è 360", t: "pow_god", d: "–ü—Ä—ã–∂–æ–∫ —Å —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–º –≤–æ–∫—Ä—É–≥ —Å–≤–æ–µ–π –æ—Å–∏."},
            {n: "–í—ã—Ö–æ–¥ –Ω–∞ –æ–¥–Ω—É —Ä—É–∫—É", t: "pow_dyn", d: "–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –ø–æ–¥—ä–µ–º –Ω–∞–¥ —Ç—É—Ä–Ω–∏–∫–æ–º."},
            {n: "–°—É–ø–µ—Ä–º–µ–Ω (–æ—Ç–∂–∏–º–∞–Ω–∏—è)", t: "pow_p", d: "–í–∑—Ä—ã–≤–Ω–æ–π –ø—Ä—ã–∂–æ–∫ —Å –æ—Ç—Ä—ã–≤–æ–º —Ä—É–∫ –∏ –Ω–æ–≥."},

            // –ü—Ä–µ—Å—Å –∏ –ö–æ—Ä–∏ (CORE)
            {n: "–§–ª–∞–≥ –¥—Ä–∞–∫–æ–Ω–∞", t: "core_hard", d: "–ü–æ–¥—ä–µ–º –ø—Ä—è–º–æ–π –ª–∏–Ω–∏–∏ —Ç–µ–ª–∞ –ª–µ–∂–∞ –Ω–∞ —Å–ø–∏–Ω–µ."},
            {n: "–ù–æ—Å–∫–∏ –∫ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω–µ", t: "core_dyn", d: "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—ä–µ–º –Ω–æ–≥ –≤ –≤–∏—Å–µ."},
            {n: "–î–≤–æ—Ä–Ω–∏–∫–∏ (Wipers)", t: "core_rot", d: "–†–æ—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–µ—Å—Å–∞ –≤ –≤–∏—Å–µ."},
            {n: "V-—Å–∫–ª–∞–¥–∫–∞", t: "core_dyn", d: "–°–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ –∫–æ—Ä–ø—É—Å–∞ –Ω–∞ –ø–æ–ª—É."},
            {n: "–í–µ–ª–æ—Å–∏–ø–µ–¥", t: "core_inf", d: "–ö–∞—Ä–¥–∏–æ-–Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∫–æ—Å—ã–µ –º—ã—à—Ü—ã."},

            // –ù–æ–≥–∏ (LEGS)
            {n: "–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è", t: "leg_base", d: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞ –¥–ª—è –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —Ç–µ–ª–∞."},
            {n: "–ü–∏—Å—Ç–æ–ª–µ—Ç–∏–∫", t: "leg_god", d: "–ü—Ä–∏—Å–µ–¥–∞–Ω–∏–µ –Ω–∞ –æ–¥–Ω–æ–π –Ω–æ–≥–µ (–±–∞–ª–∞–Ω—Å –∏ —Å–∏–ª–∞)."},
            {n: "–ë–æ–ª–≥–∞—Ä—Å–∫–∏–µ –≤—ã–ø–∞–¥—ã", t: "leg_iso", d: "–ò–∑–æ–ª–∏—Ä—É—é—â–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –∫–≤–∞–¥—Ä–∏—Ü–µ–ø—Å."},
            {n: "–ö–∞–∑–∞—á—å–∏ –ø—Ä–∏—Å–µ–¥–∞–Ω–∏—è", t: "leg_mob", d: "–ë–æ–∫–æ–≤—ã–µ –≤—ã–ø–∞–¥—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ—Å—Ç–∏."},
            {n: "–ü—Ä—ã–∂–∫–∏ –Ω–∞ –±–æ–∫—Å", t: "leg_pow", d: "–†–∞–∑–≤–∏—Ç–∏–µ –≤–∑—Ä—ã–≤–Ω–æ–π —Å–∏–ª—ã –Ω–æ–≥."},
            {n: "–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∏–µ —Å–≥–∏–±–∞–Ω–∏—è", t: "leg_e", d: "–ú–æ—â–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –±–∏—Ü–µ–ø—Å –±–µ–¥—Ä–∞."},

            // –≠–∫–∑–æ—Ç–∏–∫–∞ / –°–ø–µ—Ü (ELITE)
            {n: "–û—Ç–∂–∏–º–∞–Ω–∏—è –ì–∞–Ω–Ω–∏–±–∞–ª–∞", t: "push_elite", d: "–ì–ª—É–±–æ–∫–∏–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è —Å —É–∑–∫–∏–º —Ö–≤–∞—Ç–æ–º —É –ª–∏—Ü–∞."},
            {n: "–ö–æ—Ä–µ–π—Å–∫–∏–µ –±—Ä—É—Å—å—è", t: "push_v_e", d: "–ñ–∏–º –Ω–∞ –±—Ä—É—Å—å—è—Ö —Å–ø–∏–Ω–æ–π –∫ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω–µ."},
            {n: "–ü–µ—á–∞—Ç–Ω–∞—è –º–∞—à–∏–Ω–∫–∞", t: "pull_iso", d: "–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ –≤ –≤–∏—Å–µ –ø–æ–¥–±–æ—Ä–æ–¥–∫–æ–º."},
            {n: "–õ–æ–∫—Ç–µ–≤–æ–π –≥–æ—Ä–∏–∑–æ–Ω—Ç", t: "stat_bal", d: "–ì–æ—Ä–∏–∑–æ–Ω—Ç —Å —É–ø–æ—Ä–æ–º –ª–æ–∫—Ç–µ–π –≤ –∂–∏–≤–æ—Ç."},
            {n: "–í–∏—Å –ì–∞–Ω–Ω–∏–±–∞–ª–∞", t: "stat_pull_e", d: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –≤–∏—Å –Ω–∞ —à–≤–µ–¥—Å–∫–æ–π —Å—Ç–µ–Ω–∫–µ."},
            {n: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è 360", t: "pow_god", d: "–¢—è–≥–∞ —Å –≤—Ä–∞—â–µ–Ω–∏–µ–º –∫–æ—Ä–ø—É—Å–∞ –≤ –≤–æ–∑–¥—É—Ö–µ."},
            {n: "–•–≤–∞—Ç –Ω–∞ –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ", t: "spec_grip", d: "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Å–∏–ª—ã –ø–∞–ª—å—Ü–µ–≤."},
            {n: "–û—Ç–∂–∏–º–∞–Ω–∏—è –°–ø–∞–π–¥–µ—Ä–º–µ–Ω–∞", t: "push_mob", d: "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è —Å –≤—ã–Ω–æ—Å–æ–º –∫–æ–ª–µ–Ω–∞."},
            {n: "–ñ–µ–ª–µ–∑–Ω—ã–π –∫—Ä–µ—Å—Ç (–ø–æ–ª)", t: "stat_god", d: "–ò–º–∏—Ç–∞—Ü–∏—è –∫—Ä–µ—Å—Ç–∞ –Ω–∞ –∫–æ–ª—å—Ü–∞—Ö –Ω–∞ –ø–æ–ª—É."},
            {n: "–í–∏—Å –Ω–∞ –¥–≤—É—Ö –ø–∞–ª—å—Ü–∞—Ö", t: "spec_god", d: "–î–ª—è –∏—Å—Ç–∏–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ —Ö–≤–∞—Ç–∞."}
        ];

        let powerStats = JSON.parse(localStorage.getItem('titan_v6_stats')) || {};
        let currentSelected = null;

        function updateGlobalUI() {
            let total = 0;
            // –°—á–∏—Ç–∞–µ–º —Å—É–º–º—É –≤—Å–µ—Ö —Ä–µ–∫–æ—Ä–¥–æ–≤
            Object.values(powerStats).forEach(v => total += parseInt(v));
            
            const valEl = document.getElementById('p-val');
            const titleEl = document.getElementById('p-title');
            const barEl = document.getElementById('rank-bar');
            
            valEl.innerText = total;
            
            // –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –¥–æ 500
            let percent = (total / 500) * 100;
            barEl.style.width = Math.min(percent, 100) + "%";

            // –°–∏—Å—Ç–µ–º–∞ –∑–≤–∞–Ω–∏–π TITAN OS
            if (total >= 500) titleEl.innerText = "–ë–û–ì –ö–ê–õ–ò–°–¢–ï–ù–ò–ö–ò ü™¨";
            else if (total >= 450) titleEl.innerText = "–í–ï–†–®–ò–¢–ï–õ–¨ –°–£–î–ï–ë";
            else if (total >= 400) titleEl.innerText = "–¢–ò–¢–ê–ù –ü–£–°–¢–û–¢–´";
            else if (total >= 350) titleEl.innerText = "–ú–ê–°–¢–ï–† –¢–ï–ù–ò";
            else if (total >= 300) titleEl.innerText = "–†–ê–ó–†–£–®–ò–¢–ï–õ–¨ –ü–õ–ê–¢–û";
            else if (total >= 250) titleEl.innerText = "–°–¢–ê–õ–¨–ù–û–ô –ì–ò–ì–ê–ù–¢";
            else if (total >= 200) titleEl.innerText = "–í–û–ò–ù –î–£–•–ê";
            else if (total >= 150) titleEl.innerText = "–ê–¢–õ–ï–¢ –í–´–°–®–ï–ô –õ–ò–ì–ò";
            else if (total >= 100) titleEl.innerText = "–ü–†–û–®–ê–†–ï–ù–ù–´–ô";
            else if (total >= 50) titleEl.innerText = "–£–ß–ï–ù–ò–ö –ú–ê–°–¢–ï–†–ê";
            else if (total >= 1) titleEl.innerText = "–í–°–¢–ê–í–®–ò–ô –ù–ê –ü–£–¢–¨";
            else titleEl.innerText = "–ù–û–í–ò–ß–û–ö";
        }

        const gridContainer = document.getElementById('grid');
        TitanDB.forEach(item => {
            const card = document.createElement('div');
            card.className = 'exercise-card';
            card.innerHTML = `
                <div class="ex-meta">${item.t.replace('_', ' ')}</div>
                <div class="ex-name">${item.n}</div>
                <div class="ex-desc">${item.d}</div>
            `;
            card.onclick = () => openOverlay(item);
            gridContainer.appendChild(card);
        });

        function openOverlay(item) {
            currentSelected = item;
            document.getElementById('pnl').style.display = 'flex';
            document.getElementById('curEx').innerText = item.n.toUpperCase();
            document.getElementById('curExType').innerText = "–ê–ù–ê–õ–ò–ó –¢–ò–ü–ê: " + item.t.toUpperCase();
            document.getElementById('inp').value = powerStats[item.n] || "";
            document.getElementById('res').innerHTML = "";
            document.body.style.overflow = 'hidden';
        }

        function toggleP(state) {
            document.getElementById('pnl').style.display = state ? 'flex' : 'none';
            if(!state) document.body.style.overflow = 'auto';
        }
        // TITAN NEURAL ENGINE v6.0
        function generate() {
            const val = parseInt(document.getElementById('inp').value) || 0;
            const out = document.getElementById('res');
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∫–æ—Ä–¥–∞ –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            powerStats[currentSelected.n] = val;
            localStorage.setItem('titan_v6_stats', JSON.stringify(powerStats));
            updateGlobalUI();

            out.innerHTML = `
                <div style="text-align:center; padding:50px;">
                    <div class="ai-status">–ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ù–ï–ô–†–û–ù–ù–û–ì–û –ü–†–û–¢–û–ö–û–õ–ê...</div>
                    <div style="color:var(--n); margin-top:10px; font-size:0.7rem;">–ê–ù–ê–õ–ò–ó –¢–ò–ü–ê: ${currentSelected.t.toUpperCase()}</div>
                </div>
            `;

            setTimeout(() => {
                out.innerHTML = "";
                const fragment = document.createDocumentFragment();

                for (let d = 1; d <= 30; d++) {
                    const node = document.createElement('div');
                    node.className = 'day-node';
                    
                    // –õ–æ–≥–∏–∫–∞ –¥–Ω–µ–π –æ—Ç–¥—ã—Ö–∞ (–°–∏—Å—Ç–µ–º–Ω–∞—è –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è)
                    if (d % 4 === 0) {
                        node.classList.add('rest-day');
                        node.innerHTML = `
                            <div class="day-header">
                                <div class="day-number">#${d}</div>
                                <div class="day-method">–†–ï–ñ–ò–ú: RECOVERY</div>
                            </div>
                            <div class="exercise-block">
                                <b class="block-label">–ò–ù–°–¢–†–£–ö–¶–ò–Ø –û–¢ ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ:</b>
                                <p class="block-value">–û–¢–î–´–•</p>
                                <span class="block-desc">
                                    –ú—ã—à—Ü—ã —Ä–∞—Å—Ç—É—Ç –≤ –ø–æ–∫–æ–µ. –ï—Å–ª–∏ —Ç—ã –±—É–¥–µ—à—å –ø–∞—Ö–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞ —Ç—ã –ø—Ä–æ–∏–≥—Ä–∞–µ—à—å. 
                                    –ò—Å–ø–æ–ª—å–∑—É–π –ú–§–†-—Ä–æ–ª–ª, –≤—ã—Å–ø–∏—Å—å (–Ω–µ –º–µ–Ω–µ–µ 8.5 —á–∞—Å–æ–≤) –∏ –≤—ã–ø–µ–π 3-4 –ª–∏—Ç—Ä–∞ —á–∏—Å—Ç–æ–π –≤–æ–¥—ã.
                                </span>
                            </div>
                        `;
                    } else {
                        const brain = computeWorkout(currentSelected.t, val, d);
                        node.innerHTML = `
                            <div class="day-header">
                                <div class="day-number">#${d}</div>
                                <div class="day-method">${brain.method}</div>
                            </div>
                            ${brain.stages.map((s, i) => `
                                <div class="exercise-block">
                                    <b class="block-label">–≠–¢–ê–ü ${i + 1}: ${s.header}</b>
                                    <p class="block-value">${s.value}</p>
                                    <span class="block-desc">${s.desc}</span>
                                    <div class="block-tempo">–¢–ï–ú–ü–û-–†–ò–¢–ú: ${s.tempo}</div>
                                </div>
                                ${i < brain.stages.length - 1 ? '<div class="rest-timer-box">--- REST: '+s.rest+'s ---</div>' : ''}
                            `).join('')}
                            <div class="coach-footer">
                                <b>COACH NOTE:</b> ${getMotivationalTrigger(d)}
                            </div>
                        `;
                    }
                    fragment.appendChild(node);
                }
                out.appendChild(fragment);
                // –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –∫ –Ω–∞—á–∞–ª—É –ø–ª–∞–Ω–∞
                out.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 1000);
        }

        function computeWorkout(type, max, day) {
            const intensity = 1 + (day * 0.045); // –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            const isZero = max === 0;
            let result = { method: "", stages: [] };

            // 1. –ê–õ–ì–û–†–ò–¢–ú –î–õ–Ø –í–ï–†–¢–ò–ö–ê–õ–¨–ù–´–• –ò –ì–û–†–ò–ó–û–ù–¢–ê–õ–¨–ù–´–• –¢–Ø–ì (PULL)
            if (type.includes('pull')) {
                result.method = "VOLUMETRIC PULL PRO";
                if (isZero) {
                    result.stages = [
                        {header: "–ù–ï–ì–ê–¢–ò–í–ù–ê–Ø –§–ê–ó–ê", value: "5 –ø–æ–¥—Ö–æ–¥–æ–≤ –ø–æ 4 —Ä–∞–∑–∞", desc: "–ü—Ä—ã–∂–∫–æ–º –≤–≤–µ—Ä—Ö, –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫ –Ω–∞–¥ —Ç—É—Ä–Ω–∏–∫–æ–º. –ú–µ–¥–ª–µ–Ω–Ω–æ –æ–ø—É—Å–∫–∞–π—Å—è.", tempo: "8 —Å–µ–∫ –≤–Ω–∏–∑, –≤–∑—Ä—ã–≤ –≤–≤–µ—Ä—Ö", rest: 120},
                        {header: "–ê–ö–¢–ò–í–ê–¶–ò–Ø –¢–Ø–ì–ò", value: "3 –ø–æ 12", desc: "–ê–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è. –ì—Ä—É–¥—å –∫–∞—Å–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω—ã.", tempo: "2-0-2", rest: 90}
                    ];
                } else {
                    let top = Math.ceil(max * 0.7 * intensity);
                    result.stages = [
                        {header: "–°–ò–õ–û–í–ê–Ø –õ–ï–°–¢–ù–ò–¶–ê", value: `1 –¥–æ ${Math.min(top, max+2)}`, desc: "–î–µ–ª–∞–π 1, –æ—Ç–¥–æ—Ö–Ω–∏ 10—Å, –¥–µ–ª–∞–π 2... –¥–æ –º–∞–∫—Å–∏–º—É–º–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ.", tempo: "–í–∑—Ä—ã–≤–Ω–æ–π", rest: 180},
                        {header: "–î–û–ë–ò–í–ö–ê –•–í–ê–¢–ê", value: "2 –ø–æ–¥—Ö–æ–¥–∞", desc: "–í–∏—Å–∏ –Ω–∞ —Ç—É—Ä–Ω–∏–∫–µ –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –ª–∞–¥–æ–Ω–µ–π.", tempo: "–°—Ç–∞—Ç–∏–∫–∞", rest: 0}
                    ];
                }
            }

            // 2. –ê–õ–ì–û–†–ò–¢–ú –î–õ–Ø –ñ–ò–ú–û–í–´–• –î–í–ò–ñ–ï–ù–ò–ô (PUSH)
            else if (type.includes('push')) {
                result.method = "HYPERTROPHY PUSH CORE";
                if (isZero) {
                    result.stages = [
                        {header: "–ê–ö–¶–ï–ù–¢ –ù–ê –¢–†–ò–¶–ï–ü–°", value: "4 –ø–æ 10", desc: "–û—Ç–∂–∏–º–∞–Ω–∏—è —Å –∫–æ–ª–µ–Ω —Å —É–∑–∫–æ–π –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Ä—É–∫.", tempo: "3-1-1", rest: 90},
                        {header: "–ò–ó–û–ú–ï–¢–†–ò–Ø –í–ù–ò–ó–£", value: "3 –ø–æ 20 —Å–µ–∫", desc: "–ó–∞–º—Ä–∏ –≤ 5 —Å–º –æ—Ç –ø–æ–ª–∞. –ì—Ä—É–¥—å –Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è –∑–µ–º–ª–∏.", tempo: "–°—Ç–∞—Ç–∏–∫–∞", rest: 60}
                    ];
                } else {
                    let sets = 5;
                    let reps = Math.ceil((max / 1.5) * intensity);
                    result.stages = [
                        {header: "–†–ê–ë–û–ß–ò–ï –°–ï–¢–´", value: `${sets} –ø–æ ${reps}`, desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –æ–±—ä–µ–º. –ö–∞—Å–∞–Ω–∏–µ –≥—Ä—É–¥—å—é –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.", tempo: "2-0-1", rest: 120},
                        {header: "–í–ó–†–´–í–ù–ê–Ø –§–ê–ó–ê", value: "3 –ø–æ 6", desc: "–û—Ç–∂–∏–º–∞–Ω–∏—è —Å —Ö–ª–æ–ø–∫–æ–º. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—ã—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ.", tempo: "MAX SPEED", rest: 90}
                    ];
                }
            }

            // 3. –ê–õ–ì–û–†–ò–¢–ú –î–õ–Ø –°–¢–ê–¢–ò–ö–ò (STATIC / PLANCHE / LEVER)
            else if (type.includes('stat')) {
                result.method = "NEURAL STATIC HOLD";
                if (isZero) {
                    result.stages = [
                        {header: "–§–£–ù–î–ê–ú–ï–ù–¢ –°–í–Ø–ó–û–ö", value: "6 –ø–æ 15 —Å–µ–∫", desc: "–°–∞–º–∞—è –ª–µ–≥–∫–∞—è —Ñ–æ—Ä–º–∞ (Tuck –∏–ª–∏ —É–ø–æ—Ä —Å –æ–ø–æ—Ä–æ–π –Ω–æ–≥).", tempo: "–°—Ç–∞—Ç–∏–∫–∞", rest: 90},
                        {header: "–£–ö–†–ï–ü–õ–ï–ù–ò–ï –ö–û–†–ê", value: "4 –ø–æ 45 —Å–µ–∫", desc: "–ü–ª–∞–Ω–∫–∞ '–ü–æ–ª—ã–π –±–æ–¥–∏' (Hollow Body). –ü–æ—è—Å–Ω–∏—Ü–∞ –ø—Ä–∏–∂–∞—Ç–∞.", tempo: "–°—Ç–∞—Ç–∏–∫–∞", rest: 60}
                    ];
                } else {
                    let hold = Math.ceil(max * intensity);
                    result.stages = [
                        {header: "–ö–õ–ê–°–¢–ï–†–ù–´–ï –°–ï–¢–´", value: `${Math.ceil(hold/2)} —Å–µ–∫ x 8`, desc: "–î–µ—Ä–∂–∏ –∏–¥–µ–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É. –ï—Å–ª–∏ —Ç–µ–ª–æ –¥—Ä–æ–∂–∏—Ç ‚Äî –æ—Ç–¥—ã—Ö–∞–π –±–æ–ª—å—à–µ.", tempo: "–°—Ç–∞—Ç–∏–∫–∞", rest: 45},
                        {header: "–î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ô –í–•–û–î", value: "5 –ø–æ–≤—Ç–æ—Ä–æ–≤", desc: "–ú–µ–¥–ª–µ–Ω–Ω—ã–π –≤—Ö–æ–¥ –≤ –ø–æ–∑–∏—Ü–∏—é –∏–∑ —Å—Ç–æ–π–∫–∏ –∏–ª–∏ –≤–∏—Å–∞.", tempo: "5 —Å–µ–∫ –≤—Ö–æ–¥", rest: 120}
                    ];
                }
            }

            // 4. –ê–õ–ì–û–†–ò–¢–ú –î–õ–Ø –í–ó–†–´–í–ê –ò –ú–û–©–ù–û–°–¢–ò (POWER / MU)
            else if (type.includes('pow')) {
                result.method = "EXPLOSIVE TITAN MODE";
                if (isZero) {
                    result.stages = [
                        {header: "–í–´–°–û–ö–ò–ï –¢–Ø–ì–ò", value: "5 –ø–æ 5", desc: "–¢—è–Ω–∏ —Ç—É—Ä–Ω–∏–∫ –¥–æ —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ —Å–ø–ª–µ—Ç–µ–Ω–∏—è. –í–∑—Ä—ã–≤–∞–π—Å—è.", tempo: "MAX POWER", rest: 150},
                        {header: "–û–¢–ñ–ò–ú–ê–ù–ò–Ø –û–¢ –ü–ï–†–ï–ö–õ–ê–î–ò–ù–´", value: "4 –ø–æ 8", desc: "–ó–∞–ø—Ä—ã–≥–Ω–∏ –Ω–∞ —Ç—É—Ä–Ω–∏–∫ –∏ –¥–µ–ª–∞–π –∂–∏–º –≤ —É–ø–æ—Ä–µ.", tempo: "2-0-2", rest: 120}
                    ];
                } else {
                    result.stages = [
                        {header: "–°–ò–ù–ì–õ–´", value: `${Math.ceil(max * 1.2)} –æ–¥–∏–Ω–æ—á–Ω—ã—Ö`, desc: "–î–µ–ª–∞–π –ø–æ 1 –∏–¥–µ–∞–ª—å–Ω–æ–º—É –≤—ã—Ö–æ–¥—É. –û—Ç–¥—ã—Ö –º–µ–∂–¥—É –Ω–∏–º–∏ 30 —Å–µ–∫.", tempo: "–í–∑—Ä—ã–≤", rest: 180},
                        {header: "–°–ö–û–†–û–°–¢–¨", value: "3 –ø–æ 12", desc: "–í–∑—Ä—ã–≤–Ω—ã–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –¥–æ –≥—Ä—É–¥–∏.", tempo: "MAX SPEED", rest: 120}
                    ];
                }
            }

            // 5. –ê–õ–ì–û–†–ò–¢–ú –î–õ–Ø –ù–û–ì (LEGS)
            else {
                result.method = "LEGIONNAIRE STRENGTH";
                let reps = isZero ? 15 : Math.ceil(max * intensity);
                result.stages = [
                    {header: "–û–°–ù–û–í–ù–û–ô –ë–õ–û–ö", value: `4 –ø–æ ${reps}`, desc: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ —Å–µ–¥–∞. –°–ø–∏–Ω–∞ —Ä–æ–≤–Ω–æ.", tempo: "3-0-1", rest: 90},
                    {header: "–ü–õ–ò–û–ú–ï–¢–†–ò–ö–ê", value: "3 –ø–æ 10", desc: "–í—ã–ø—Ä—ã–≥–∏–≤–∞–Ω–∏—è –∏–∑ –≥–ª—É–±–æ–∫–æ–≥–æ —Å–µ–¥–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ.", tempo: "–í–∑—Ä—ã–≤", rest: 120}
                ];
            }

            return result;
        }

        function getMotivationalTrigger(d) {
            const quotes = [
                "–¢–≤–æ—ë —Ç–µ–ª–æ ‚Äî —Ç–≤–æ–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ö—Ä–∞–º. –ù–µ –¥–∞–π –µ–º—É –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –≤ —Ä—É–∏–Ω—ã.",
                "–¢–∞–º, –≥–¥–µ –∫–æ–Ω—á–∞—é—Ç—Å—è —Å–∏–ª—ã, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä. –ñ–º–∏!",
                " ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∏–∫, —ç—Ç–æ —Ç–≤–æ–π –Ω–æ–≤—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∂–∏–∑–Ω–∏.",
                "–ë–æ–ª—å –≤—Ä–µ–º–µ–Ω–Ω–∞. –ì–æ—Ä–¥–æ—Å—Ç—å –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–µ—á–Ω–∞.",
                "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ ‚Äî —ç—Ç–æ —É–º–µ–Ω–∏–µ –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É —Ç–µ–º, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å —Å–µ–π—á–∞—Å, –∏ —Ç–µ–º, —á–µ–≥–æ —Ç—ã —Ö–æ—á–µ—à—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ.",
                "–ö–∞–∂–¥–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —à–∞–≥ –ø—Ä–æ—á—å –æ—Ç –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.",
                "–¢—ã –Ω–µ —É—Å—Ç–∞–ª. –¢—ã –ø—Ä–æ—Å—Ç–æ –∏—â–µ—à—å –ø–æ–≤–æ–¥ —Å–¥–∞—Ç—å—Å—è. –ù–µ –¥–∞–≤–∞–π —Å–µ–±–µ –µ–≥–æ."
            ];
            return quotes[d % quotes.length];
        }
        // TITAN AUDIO ENGINE
        const AudioFX = {
            ctx: null,
            init() {
                this.ctx = new (window.AudioContext || window.webkitAudioContext)();
            },
            play(type) {
                if (!this.ctx) this.init();
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.connect(gain);
                gain.connect(this.ctx.destination);

                if (type === 'click') {
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(880, this.ctx.currentTime);
                    gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.1);
                    osc.start();
                    osc.stop(this.ctx.currentTime + 0.1);
                } 
                else if (type === 'generate') {
                    osc.type = 'sawtooth';
                    osc.frequency.setValueAtTime(110, this.ctx.currentTime);
                    osc.frequency.exponentialRampToValueAtTime(440, this.ctx.currentTime + 0.5);
                    gain.gain.setValueAtTime(0.05, this.ctx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.5);
                    osc.start();
                    osc.stop(this.ctx.currentTime + 0.5);
                }
                else if (type === 'complete') {
                    const now = this.ctx.currentTime;
                    [440, 554, 659].forEach((f, i) => {
                        const o = this.ctx.createOscillator();
                        const g = this.ctx.createGain();
                        o.type = 'triangle';
                        o.connect(g);
                        g.connect(this.ctx.destination);
                        o.frequency.setValueAtTime(f, now + i*0.1);
                        g.gain.setValueAtTime(0.1, now + i*0.1);
                        g.gain.exponentialRampToValueAtTime(0.01, now + i*0.1 + 0.3);
                        o.start(now + i*0.1);
                        o.stop(now + i*0.1 + 0.3);
                    });
                }
            }
        };

        // –¢–†–ï–ö–ï–† –í–ò–ö–û–ù–ê–ù–ù–Ø (Persistent Progress)
        let completedDays = JSON.parse(localStorage.getItem('titan_v6_days')) || {};

        function markDay(dayId) {
            const el = document.getElementById(dayId);
            const isDone = el.classList.toggle('completed');
            
            const exerciseKey = currentSelected.n;
            if (!completedDays[exerciseKey]) completedDays[exerciseKey] = [];
            
            if (isDone) {
                completedDays[exerciseKey].push(dayId);
                AudioFX.play('complete');
                showNotification("–î–ï–ù–¨ –ó–ê–í–ï–†–®–ï–ù. –°–ò–õ–ê –†–ê–°–¢–ï–¢.");
            } else {
                completedDays[exerciseKey] = completedDays[exerciseKey].filter(id => id !== dayId);
            }
            
            localStorage.setItem('titan_v6_days', JSON.stringify(completedDays));
        }

        // –°–ò–°–¢–ï–ú–ê –°–ü–û–í–Ü–©–ï–ù–¨
        function showNotification(text) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
                background: var(--n); color: #000; padding: 20px 40px; border-radius: 50px;
                font-family: Orbitron; font-weight: 900; z-index: 10000; font-size: 0.8rem;
                letter-spacing: 2px; box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: toastIn 0.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
            `;
            toast.innerText = text;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.animation = 'toastOut 0.5s forwards';
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        // –ï–ö–°–ü–û–†–¢ –í –ü–†–Ø–ú–ò–ô –¢–ï–ö–°–¢ (–î–õ–Ø –ù–û–¢–ê–¢–û–ö)
        function exportPlan() {
            AudioFX.play('click');
            let content = `TITAN OS v6.0 | ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ: ü™¨\n`;
            content += `–ü–õ–ê–ù –î–õ–Ø: ${currentSelected.n.toUpperCase()}\n`;
            content += `–í–ê–® –ú–ê–ö–°–ò–ú–£–ú: ${document.getElementById('inp').value}\n`;
            content += `------------------------------------------\n\n`;

            const days = document.querySelectorAll('.day-node');
            days.forEach(d => {
                const num = d.querySelector('.day-number').innerText;
                const type = d.querySelector('.day-method').innerText;
                content += `${num} | ${type}\n`;
                const blocks = d.querySelectorAll('.exercise-block');
                blocks.forEach(b => {
                    const label = b.querySelector('.block-label').innerText;
                    const val = b.querySelector('.block-value').innerText;
                    content += `  - ${label}: ${val}\n`;
                });
                content += `\n`;
            });

            const blob = new Blob([content], {type: 'text/plain'});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `TITAN_PLAN_${currentSelected.n}.txt`;
            link.click();
        }

        // –î–û–î–ê–Ñ–ú–û –°–¢–ò–õ–Ü –î–õ–Ø –ê–ù–Ü–ú–ê–¶–Ü–ô –¢–û–°–¢–Ü–í
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes toastIn {
                from { bottom: -100px; opacity: 0; }
                to { bottom: 40px; opacity: 1; }
            }
            @keyframes toastOut {
                to { opacity: 0; transform: translate(-50%, 20px); }
            }
            .completed {
                filter: grayscale(1);
                opacity: 0.3 !important;
                border-left-color: #00ff66 !important;
            }
            .completed::after {
                content: '‚úì –í–´–ü–û–õ–ù–ï–ù–û';
                position: absolute; top: 20px; right: 40px;
                color: #00ff66; font-family: Orbitron; font-size: 0.7rem;
            }
            .btn-action {
                background: #111; border: 1px solid var(--b-neon); color: #fff;
                padding: 15px 25px; border-radius: 15px; font-family: Orbitron;
                font-size: 0.6rem; cursor: pointer; transition: 0.3s;
                margin-top: 20px; display: inline-block; text-transform: uppercase;
            }
            .btn-action:hover { background: var(--n); color: #000; }
        `;
        document.head.appendChild(style);

        // –û–Ω–æ–≤–ª—é—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é generate –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∫–ª—ñ–∫—ñ–≤ —Ç–∞ —Ç—Ä–µ–∫—ñ–Ω–≥—É
        const originalGenerate = generate;
        generate = function() {
            AudioFX.play('generate');
            originalGenerate();
            // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –µ–∫—Å–ø–æ—Ä—Ç—É –ø—ñ—Å–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
            setTimeout(() => {
                const exportBtn = document.createElement('button');
                exportBtn.className = 'generate-btn';
                exportBtn.style.marginTop = '20px';
                exportBtn.style.background = '#fff';
                exportBtn.innerText = '–°–ö–ê–ß–ê–¢–¨ –¢–ï–ö–°–¢–û–í–´–ô –ü–õ–ê–ù';
                exportBtn.onclick = exportPlan;
                document.getElementById('res').prepend(exportBtn);
            }, 1100);
        };
        // TITAN AI SCANNER & MASTER PRESETS
        const TitanScanner = {
            lines: [
                "–ê–ù–ê–õ–ò–ó –ú–´–®–ï–ß–ù–´–• –í–û–õ–û–ö–û–ù...",
                "–ü–†–û–í–ï–†–ö–ê –ù–ï–ô–†–û–ù–ù–û–ô –°–í–Ø–ó–ò –ú–û–ó–ì-–ú–´–®–¶–´...",
                "–°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï –ö–†–ò–í–û–ô –£–¢–û–ú–õ–Ø–ï–ú–û–°–¢–ò...",
                "–†–ê–°–ß–ï–¢ –ì–û–†–ú–û–ù–ê–õ–¨–ù–û–ì–û –û–¢–ö–õ–ò–ö–ê...",
                "–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –° –ì–†–ê–í–ò–¢–ê–¶–ò–û–ù–ù–´–ú –ü–û–õ–ï–ú...",
                "–ü–û–î–ì–û–¢–û–í–ö–ê –ü–†–û–¢–û–ö–û–õ–ê '–ß–ï–†–ï–ó –°–ò–õ–£'..."
            ],
            async start(callback) {
                const out = document.getElementById('res');
                out.innerHTML = `
                    <div id="scanner-wrap" style="padding:100px 0; text-align:center;">
                        <div class="scanner-ring"></div>
                        <div id="scan-text" style="font-family:Orbitron; color:var(--n); font-size:0.8rem; letter-spacing:5px; margin-top:40px;">INIT SCAN...</div>
                        <div class="scan-bar-container"><div id="scan-bar"></div></div>
                    </div>
                `;
                
                for(let i=0; i < this.lines.length; i++) {
                    document.getElementById('scan-text').innerText = this.lines[i];
                    document.getElementById('scan-bar').style.width = ((i+1)/this.lines.length)*100 + "%";
                    AudioFX.play('click');
                    await new Promise(r => setTimeout(r, 600));
                }
                callback();
            }
        };

        // –ì–õ–û–ë–ê–õ–¨–ù–Ü –ü–û–†–ê–î–ò –í–Ü–î ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ
        const MasterTips = [
            {t: "–•–í–ê–¢", c: "–°–∂–∏–º–∞–π –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω—É —Ç–∞–∫, –±—É–¥—Ç–æ —Ö–æ—á–µ—à—å –≤—ã–¥–∞–≤–∏—Ç—å –∏–∑ –Ω–µ–µ –≤–æ–¥—É. –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç —à–∏—Ä–æ—á–∞–π—à–∏–µ –Ω–∞ 30% —Å–∏–ª—å–Ω–µ–µ."},
            {t: "–î–´–•–ê–ù–ò–ï", c: "–í—ã–¥–æ—Ö –Ω–∞ —É—Å–∏–ª–∏–∏, –≤–¥–æ—Ö –Ω–∞ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–∏. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–π –¥—ã—Ö–∞–Ω–∏–µ –≤ —Å—Ç–∞—Ç–∏–∫–µ ‚Äî –ª–æ–ø–Ω—É—Ç —Å–æ—Å—É–¥—ã."},
            {t: "–ü–†–ï–°–°", c: "–í –ª—é–±–æ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–∏ –Ω–∞–ø—Ä—è–≥–∞–π –∫–æ—Ä. –≠—Ç–æ —Ç–≤–æ–π —Ü–µ–Ω—Ç—Ä —Å–∏–ª—ã. –ï—Å–ª–∏ –∫–æ—Ä —Å–ø–∏—Ç ‚Äî —Ç–µ–ª–æ –±–æ–ª—Ç–∞–µ—Ç—Å—è –∫–∞–∫ —Ç—Ä—è–ø–∫–∞."},
            {t: "–õ–û–ö–¢–ò", c: "–í –æ—Ç–∂–∏–º–∞–Ω–∏—è—Ö –∏ –Ω–∞ –±—Ä—É—Å—å—è—Ö –Ω–µ —Ä–∞–∑–≤–æ–¥–∏ –ª–æ–∫—Ç–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—ã. –î–µ—Ä–∂–∏ –∏—Ö –±–ª–∏–∂–µ –∫ —Ç–µ–ª—É ‚Äî –ø–æ–±–µ—Ä–µ–≥–∏ —Å—É—Å—Ç–∞–≤—ã."},
            {t: "–ü–°–ò–•–ò–ö–ê", c: "–ï—Å–ª–∏ —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ –Ω–µ –º–æ–∂–µ—à—å ‚Äî —Å–¥–µ–ª–∞–π –µ—â–µ –¥–≤–∞. –°–∏–ª–∞ —Ä–∞—Å—Ç–µ—Ç –∏–º–µ–Ω–Ω–æ –≤ —ç—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–µ–∫—É–Ω–¥—ã."}
        ];

        function renderMasterPanel() {
            const panel = document.createElement('div');
            panel.style.cssText = `
                margin-top: 100px; padding: 60px; background: #050505; border-radius: 50px;
                border: 1px solid var(--b-neon); position: relative; overflow: hidden;
            `;
            panel.innerHTML = `
                <div style="font-family:Orbitron; color:var(--n); font-size:1.2rem; letter-spacing:10px; margin-bottom:40px;">–°–û–í–ï–¢–´ –ú–ê–°–¢–ï–†–ê</div>
                <div id="tip-content" style="font-size:1.2rem; line-height:1.6; min-height:100px;">–ö–ª–∏–∫–Ω–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞–Ω–∏–µ.</div>
                <div style="display:flex; flex-wrap:wrap; gap:15px; margin-top:40px;">
                    ${MasterTips.map(tip => `
                        <button class="btn-action" onclick="showTip('${tip.t}', '${tip.c}')">${tip.t}</button>
                    `).join('')}
                </div>
            `;
            document.querySelector('.main-container').appendChild(panel);
        }

        function showTip(title, content) {
            AudioFX.play('click');
            const box = document.getElementById('tip-content');
            box.style.opacity = 0;
            setTimeout(() => {
                box.innerHTML = `<b style="color:var(--n)">${title}:</b> ${content}`;
                box.style.opacity = 1;
            }, 300);
        }

        // –û–ù–û–í–õ–ï–ù–ù–Ø –°–¢–ò–õ–Ü–í –î–õ–Ø –°–ö–ê–ù–ï–†–ê
        const scanStyles = document.createElement('style');
        scanStyles.innerHTML = `
            .scanner-ring {
                width: 150px; height: 150px; border: 2px solid var(--n);
                border-radius: 50%; margin: 0 auto; position: relative;
                border-top-color: transparent; animation: spin 1s linear infinite;
            }
            .scanner-ring::after {
                content: ''; position: absolute; inset: 10px;
                border: 2px solid var(--gold); border-radius: 50%;
                border-bottom-color: transparent; animation: spin 2s linear infinite reverse;
            }
            @keyframes spin { to { transform: rotate(360deg); } }
            .scan-bar-container {
                width: 300px; height: 4px; background: #111;
                margin: 40px auto 0; border-radius: 10px; overflow: hidden;
            }
            #scan-bar {
                width: 0%; height: 100%; background: var(--n);
                transition: 0.6s cubic-bezier(0.19, 1, 0.22, 1);
                box-shadow: 0 0 20px var(--n);
            }
            #tip-content { transition: 0.3s; }
        `;
        document.head.appendChild(scanStyles);

        // –ü–ï–†–ï–ó–ê–ü–ò–° –ì–ï–ù–ï–†–ê–¶–Ü–á –ó–Ü –°–ö–ê–ù–ï–†–û–ú
        const finalStepGenerate = generate;
        generate = function() {
            const v = document.getElementById('inp').value;
            if(v === "") {
                showNotification("–í–í–ï–î–ò–¢–ï –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê");
                return;
            }
            AudioFX.play('generate');
            TitanScanner.start(() => {
                // –í–∏–∫–ª–∏–∫–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑ –ß–∞—Å—Ç–∏–Ω–∏ 3
                const out = document.getElementById('res');
                out.innerHTML = "";
                
                // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –µ–∫—Å–ø–æ—Ä—Ç—É
                const exportBtn = document.createElement('button');
                exportBtn.className = 'generate-btn';
                exportBtn.style.marginBottom = '50px';
                exportBtn.style.background = '#fff';
                exportBtn.innerText = '–°–ö–ê–ß–ê–¢–¨ –¢–ï–ö–°–¢–û–í–´–ô –ü–õ–ê–ù';
                exportBtn.onclick = exportPlan;
                out.appendChild(exportBtn);

                // –ó–∞–ø—É—Å–∫–∞—î–º–æ –ª–æ–≥—ñ–∫—É –ø–æ–±—É–¥–æ–≤–∏ –¥–Ω—ñ–≤
                const fragment = document.createDocumentFragment();
                for (let d = 1; d <= 30; d++) {
                    const node = document.createElement('div');
                    node.id = `day-${currentSelected.n}-${d}`;
                    node.className = 'day-node';
                    
                    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ –¥–µ–Ω—å –≤–∂–µ –≤–∏–∫–æ–Ω–∞–Ω–∏–π
                    const exerciseKey = currentSelected.n;
                    if(completedDays[exerciseKey] && completedDays[exerciseKey].includes(node.id)) {
                        node.classList.add('completed');
                    }

                    if (d % 4 === 0) {
                        node.classList.add('rest-day');
                        node.innerHTML = `
                            <div class="day-header">
                                <div class="day-number">#${d}</div>
                                <div class="day-method">–†–ï–ñ–ò–ú: RECOVERY</div>
                            </div>
                            <div class="exercise-block">
                                <b class="block-label">–ò–ù–°–¢–†–£–ö–¶–ò–Ø ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.–∫:</b>
                                <p class="block-value">–û–¢–î–´–•</p>
                                <span class="block-desc">–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¶–ù–°.</span>
                            </div>
                        `;
                    } else {
                        const brain = computeWorkout(currentSelected.t, parseInt(v), d);
                        node.innerHTML = `
                            <div class="day-header">
                                <div class="day-number">#${d}</div>
                                <div class="day-method">${brain.method}</div>
                            </div>
                            ${brain.stages.map((s, i) => `
                                <div class="exercise-block">
                                    <b class="block-label">–≠–¢–ê–ü ${i + 1}: ${s.header}</b>
                                    <p class="block-value">${s.value}</p>
                                    <span class="block-desc">${s.desc}</span>
                                    <div class="block-tempo">–¢–ï–ú–ü–û: ${s.tempo}</div>
                                </div>
                            `).join('')}
                            <button class="check-day" onclick="markDay('${node.id}')">–û–¢–ú–ï–¢–ò–¢–¨ –í–´–ü–û–õ–ù–ï–ù–ò–ï</button>
                        `;
                    }
                    fragment.appendChild(node);
                }
                out.appendChild(fragment);
                showNotification("–ü–õ–ê–ù –°–§–û–†–ú–ò–†–û–í–ê–ù –£–°–ü–ï–®–ù–û");
            });
        };

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.onload = () => {
            updateGlobalUI();
            renderMasterPanel();
            showNotification("TITAN OS –ó–ê–ì–†–£–ñ–ï–ù–ê. –ü–†–ò–í–ï–¢–°–¢–í–£–Æ, –ê–¢–õ–ï–¢.");
        };
        // TITAN ELITE SECRETS & SYSTEM OPTIMIZATION
        const TitanSecrets = {
            codes: {
                "300": () => {
                    document.documentElement.style.setProperty('--n', '#00ff66');
                    showNotification("–†–ï–ñ–ò–ú –ë–ï–†–°–ï–†–ö–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù ü™¨");
                    AudioFX.play('complete');
                },
                "777": () => {
                    totalPower = 500;
                    updateGlobalUI();
                    showNotification("–î–û–°–¢–£–ü –ë–û–ì–ê –ü–û–õ–£–ß–ï–ù. –°–ò–°–¢–ï–ú–ê –ü–ï–†–ï–ó–ê–ì–†–£–ñ–ï–ù–ê.");
                }
            },
            check(val) {
                if(this.codes[val]) this.codes[val]();
            }
        };

        // –ú–û–ù–ò–¢–û–†–ò–ù–ì –°–û–°–¢–û–Ø–ù–ò–Ø –°–ò–°–¢–ï–ú–´
        function initSystemHealth() {
            console.log("%c TITAN OS v6.0 | ÿ≥.—á–µ—Ä–µ–∑.—Å–∏–ª—É.ŸÉ ", "color:#ff6b00; font-weight:bold; font-size:20px;");
            console.log("Status: 999999 IQ Active");
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
            window.addEventListener('beforeunload', () => {
                localStorage.setItem('titan_v6_backup', JSON.stringify({
                    power: powerStats,
                    days: completedDays
                }));
            });
        }

        // –î–û–ë–ê–í–õ–Ø–ï–ú –°–ï–ö–†–ï–¢–ù–£–Æ –ö–ù–û–ü–ö–£ –°–ë–†–û–°–ê (–î–õ–Ø –¢–ï–°–¢–û–í)
        function createResetNode() {
            const footer = document.createElement('footer');
            footer.style.cssText = `
                padding: 100px 5%; text-align: center; border-top: 1px solid #111;
                margin-top: 100px; opacity: 0.5; font-size: 0.6rem; letter-spacing: 5px;
            `;
            footer.innerHTML = `
                <div>DESIGNED BY TITAN NEURAL NETWORKS</div>
                <div style="margin-top:20px; cursor:pointer;" onclick="hardReset()">–°–ë–†–û–°–ò–¢–¨ –í–°–ï –î–ê–ù–ù–´–ï –°–ò–°–¢–ï–ú–´</div>
            `;
            document.body.appendChild(footer);
        }

        function hardReset() {
            if(confirm("–í–ù–ò–ú–ê–ù–ò–ï: –í—Å–µ —Ä–µ–∫–æ—Ä–¥—ã –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥—É—Ç —Å—Ç–µ—Ä—Ç—ã. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?")) {
                localStorage.clear();
                location.reload();
            }
        }

        // –û–ë–†–ê–ë–û–¢–ö–ê –ö–û–î–û–í –í –ò–ù–ü–£–¢–ï
        document.getElementById('inp').addEventListener('input', (e) => {
            TitanSecrets.check(e.target.value);
        });

        // –§–ò–ù–ê–õ–¨–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        initSystemHealth();
        createResetNode();

        /* –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£:
           1. –°–∫–æ–ø–∏—Ä—É–π –≤—Å–µ 6 —á–∞—Å—Ç–µ–π –≤ –æ–¥–∏–Ω .html —Ñ–∞–π–ª.
           2. –û—Ç–∫—Ä–æ–π –µ–≥–æ –≤ –ª—é–±–æ–º –±—Ä–∞—É–∑–µ—Ä–µ (Chrome/Safari/Mobile).
           3. –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –û–§–§–õ–ê–ô–ù –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–≤–æ–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.
           4. –î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Å–µ—Ç–∏: –∑–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª –Ω–∞ GitHub Pages –∏–ª–∏ Vercel (–±–µ—Å–ø–ª–∞—Ç–Ω–æ).
        */
    </script>
</body>
</html>
       
